"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[774],{9026(e,n,o){o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"deployment/docker","title":"Docker Setup","description":"This guide walks through getting Docker on macOS and running the portfolio in a container. If you already have Docker installed, skip to Build and run.","source":"@site/docs/deployment/docker.md","sourceDirName":"deployment","slug":"/deployment/docker","permalink":"/greenlight/deployment/docker","draft":false,"unlisted":false,"editUrl":"https://github.com/adrock-miles/greenlight/tree/main/docs/docs/deployment/docker.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Docker Setup"},"sidebar":"docsSidebar","previous":{"title":"Contact Info","permalink":"/greenlight/content/contact"},"next":{"title":"GitHub Pages (Docs)","permalink":"/greenlight/deployment/github-pages"}}');var d=o(4848),i=o(8453);const t={sidebar_position:1,title:"Docker Setup"},s="Running with Docker",c={},l=[{value:"Install Docker on macOS",id:"install-docker-on-macos",level:2},{value:"Option A \u2014 Docker Desktop (recommended)",id:"option-a--docker-desktop-recommended",level:3},{value:"Option B \u2014 Homebrew (one command)",id:"option-b--homebrew-one-command",level:3},{value:"Build and run",id:"build-and-run",level:2},{value:"What happens under the hood",id:"what-happens-under-the-hood",level:2},{value:"Useful commands",id:"useful-commands",level:2},{value:"Optional: add a compose file",id:"optional-add-a-compose-file",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"&quot;Cannot connect to the Docker daemon&quot;",id:"cannot-connect-to-the-docker-daemon",level:3},{value:"Port 3000 already in use",id:"port-3000-already-in-use",level:3}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"running-with-docker",children:"Running with Docker"})}),"\n",(0,d.jsxs)(n.p,{children:["This guide walks through getting Docker on ",(0,d.jsx)(n.strong,{children:"macOS"})," and running the portfolio in a container. If you already have Docker installed, skip to ",(0,d.jsx)(n.a,{href:"#build-and-run",children:"Build and run"}),"."]}),"\n",(0,d.jsx)(n.h2,{id:"install-docker-on-macos",children:"Install Docker on macOS"}),"\n",(0,d.jsx)(n.h3,{id:"option-a--docker-desktop-recommended",children:"Option A \u2014 Docker Desktop (recommended)"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["Go to ",(0,d.jsx)(n.a,{href:"https://www.docker.com/products/docker-desktop/",children:"docker.com/products/docker-desktop"})]}),"\n",(0,d.jsxs)(n.li,{children:["Click ",(0,d.jsx)(n.strong,{children:"Download for Mac"})," \u2014 choose ",(0,d.jsx)(n.strong,{children:"Apple Silicon"})," (M1/M2/M3/M4) or ",(0,d.jsx)(n.strong,{children:"Intel"})," depending on your Mac"]}),"\n",(0,d.jsxs)(n.li,{children:["Open the downloaded ",(0,d.jsx)(n.code,{children:".dmg"})," and drag ",(0,d.jsx)(n.strong,{children:"Docker"})," to your Applications folder"]}),"\n",(0,d.jsxs)(n.li,{children:["Launch ",(0,d.jsx)(n.strong,{children:"Docker"})," from Applications \u2014 it will ask for your password to install helper components"]}),"\n",(0,d.jsx)(n.li,{children:'Wait for the Docker icon in your menu bar to show "Docker Desktop is running"'}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Verify it works:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"docker --version\n# Docker version 27.x.x, build ...\n"})}),"\n",(0,d.jsx)(n.h3,{id:"option-b--homebrew-one-command",children:"Option B \u2014 Homebrew (one command)"}),"\n",(0,d.jsxs)(n.p,{children:["If you use ",(0,d.jsx)(n.a,{href:"https://brew.sh/",children:"Homebrew"}),":"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"brew install --cask docker\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Then open ",(0,d.jsx)(n.strong,{children:"Docker"})," from Applications and wait for it to finish starting."]}),"\n",(0,d.jsx)(n.admonition,{type:"tip",children:(0,d.jsxs)(n.p,{children:["Docker Desktop includes both ",(0,d.jsx)(n.code,{children:"docker"})," and ",(0,d.jsx)(n.code,{children:"docker compose"}),". No extra installs needed."]})}),"\n",(0,d.jsx)(n.h2,{id:"build-and-run",children:"Build and run"}),"\n",(0,d.jsx)(n.p,{children:"From the project root:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# Build the image\ndocker build -t greenlight .\n\n# Run the container\ndocker run -p 3000:3000 greenlight\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Open ",(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.a,{href:"http://localhost:3000",children:"http://localhost:3000"})})," in your browser. That's it."]}),"\n",(0,d.jsx)(n.h2,{id:"what-happens-under-the-hood",children:"What happens under the hood"}),"\n",(0,d.jsxs)(n.p,{children:["The included ",(0,d.jsx)(n.code,{children:"Dockerfile"})," is a two-stage build:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-dockerfile",children:'# Stage 1 \u2014 build the app\nFROM node:22-alpine AS build\nWORKDIR /app\nCOPY package.json package-lock.json ./\nRUN npm ci\nCOPY . .\nRUN npm run build\n\n# Stage 2 \u2014 production server (small image)\nFROM node:22-alpine\nWORKDIR /app\nCOPY package.json package-lock.json ./\nRUN npm ci --omit=dev\nCOPY server.js .\nCOPY --from=build /app/dist ./dist\nEXPOSE 3000\nCMD ["node", "server.js"]\n'})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Stage 1"})," installs all dependencies, compiles TypeScript, and bundles with Vite"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Stage 2"})," copies only production dependencies and the built ",(0,d.jsx)(n.code,{children:"dist/"})," folder \u2014 keeping the final image small"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"useful-commands",children:"Useful commands"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Command"}),(0,d.jsx)(n.th,{children:"What it does"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"docker build -t greenlight ."})}),(0,d.jsx)(n.td,{children:"Build the image"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"docker run -p 3000:3000 greenlight"})}),(0,d.jsx)(n.td,{children:"Start a container on port 3000"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"docker run -d -p 3000:3000 greenlight"})}),(0,d.jsx)(n.td,{children:"Start in the background (detached)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"docker ps"})}),(0,d.jsx)(n.td,{children:"List running containers"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"docker stop <container-id>"})}),(0,d.jsx)(n.td,{children:"Stop a container"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"docker compose up"})}),(0,d.jsxs)(n.td,{children:["Build + run (if you add a ",(0,d.jsx)(n.code,{children:"compose.yaml"}),")"]})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"optional-add-a-compose-file",children:"Optional: add a compose file"}),"\n",(0,d.jsxs)(n.p,{children:["For convenience you can create a ",(0,d.jsx)(n.code,{children:"compose.yaml"})," in the project root:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'services:\n  web:\n    build: .\n    ports:\n      - "3000:3000"\n'})}),"\n",(0,d.jsx)(n.p,{children:"Then just run:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"docker compose up\n"})}),"\n",(0,d.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,d.jsx)(n.h3,{id:"cannot-connect-to-the-docker-daemon",children:'"Cannot connect to the Docker daemon"'}),"\n",(0,d.jsx)(n.p,{children:"Docker Desktop isn't running. Open it from Applications and wait for the menu bar icon to show a steady state."}),"\n",(0,d.jsx)(n.h3,{id:"port-3000-already-in-use",children:"Port 3000 already in use"}),"\n",(0,d.jsx)(n.p,{children:"Either stop whatever's using the port, or map to a different one:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"docker run -p 8080:3000 greenlight\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Then visit ",(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.a,{href:"http://localhost:8080",children:"http://localhost:8080"})})," instead."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},8453(e,n,o){o.d(n,{R:()=>t,x:()=>s});var r=o(6540);const d={},i=r.createContext(d);function t(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);